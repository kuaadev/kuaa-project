<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KUAA 99.9 FM - Salt Lake City Community Radio</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Hidden Audio Player -->
    <audio id="audio-player" preload="auto">
        <source src="https://stream.xmission.com/kuaa" type="audio/mpeg">
    </audio>

    <header id="header-placeholder"></header>

    <main>
        <section id="home" class="hero text-center">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-10">
                        <h1 class="display-4 mb-4">Low Powered FM Community Radio Station in Salt Lake City</h1>
                        <p class="lead mb-5">KUAA 99.9 FM is a low powered FM community radio station broadcasting
                            terrestrially in Salt Lake City at 99.9FM, and streaming around the world at kuaafm.org. We
                            pride ourselves on specializing in musical, cultural, linguistic, and artistic diversity.
                            KUAA is an extension of and brought to you by Utah Arts Alliance.</p>

                        <div id="player-container" class="player-container text-center">
                            <!-- Player content remains the same -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="schedule" class="py-5">
            <!-- Schedule content remains the same -->
        </section>
    </main>

    <footer id="footer-placeholder" class="footer py-4"></footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"></script>
    <script>
        // --- TEMPLATE LOADER ---
        async function loadTemplate(url, elementId) {
            const response = await fetch(url);
            const text = await response.text();
            document.getElementById(elementId).innerHTML = text;
        }

        async function initializePage() {
            await Promise.all([
                loadTemplate('_header.html', 'header-placeholder'),
                loadTemplate('_footer.html', 'footer-placeholder')
            ]);

            // Highlight active nav link
            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            const navLinks = document.querySelectorAll('.navbar-nav .nav-link');
            navLinks.forEach(link => {
                if (link.getAttribute('href') === currentPage) {
                    link.classList.add('active');
                }
            });

            // Initialize page-specific functionality AFTER header is loaded
            initializeHomePage();
        }


        function initializeHomePage() {
            // All the JavaScript logic from your index.html goes here
            // (Now Playing, Schedule, Player Controls, etc.)
            const colorThief = new ColorThief();

            const audioPlayer = document.getElementById('audio-player');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const navPlayBtn = document.getElementById('nav-play-btn');
            // ... and so on for all your variables and functions ...

            // --- INITIALIZE ---
            // fetchNowPlaying();
            // fetchSchedule();
            // setInterval(fetchNowPlaying, 20000);
        }

        initializePage();
    </script>
</body>

</html>