This artifact contains the updated multi-page project, with the globe moved to its own page and a more robust "Now
Playing" feature.

Project Structure
Your project folder should now contain the following files:

kuaa-root-project/
├── index.html <-- Updated ├── listeners.html ├── style.css <-- Updated ├── netlify.toml ├── package.json └── netlify/
    └── functions/ ├── get-now-playing.js ├── get-recent-spins.js └── get-schedule.js 1. package.json (No changes) 2.
    netlify.toml (No changes) 3. get-now-playing.js (No changes) 4. get-recent-spins.js (No changes) 5. get-schedule.js
    (No changes) 6. listeners.html (No changes) 7. style.css (Updated) Location: In the main kuaa-root-project folder.
    Changes: Increased player album art size and updated hero background. :root { --kuaa-primary: #E63946;
    --kuaa-secondary: #F1FAEE; --kuaa-dark: #1D3557; --kuaa-light: #A8DADC; --kuaa-accent: #457B9D; --player-bg:
    #2d3436; --player-text: #dfe6e9; --player-text-muted: #b2bec3; } body { font-family: 'Inter' , sans-serif;
    background-color: var(--kuaa-secondary); color: var(--kuaa-dark); } .navbar { background-color: rgba(29, 53, 87,
    0.95); backdrop-filter: blur(10px); } .navbar-brand { font-weight: 900; font-size: 1.8rem; } .nav-link {
    font-weight: 700; } .btn-danger { background-color: var(--kuaa-primary); border-color: var(--kuaa-primary); }
    .btn-danger:hover { background-color: #c42d39; border-color: #c42d39; } .section-title { font-weight: 900; color:
    var(--kuaa-dark); position: relative; display: inline-block; padding-bottom: 0.5rem; margin-bottom: 2rem; }
    .section-title::after { content: '' ; position: absolute; bottom: 0; left: 0; width: 50%; height: 4px;
    background-color: var(--kuaa-primary); border-radius: 2px; } .hero { background: linear-gradient(rgba(0, 0, 0, 0.6),
    rgba(0, 0, 0, 0.8)), url('https://placehold.co/1920x1080/1D3557/1D3557') no-repeat center center; background-size:
    cover; color: var(--kuaa-secondary); padding: 8rem 0; } .hero h1 { font-weight: 900; font-size: 3.5rem; }
    .player-container { background-color: var(--player-bg); color: var(--player-text); border-radius: 1.5rem; overflow:
    hidden; box-shadow: 0 15px 30px rgba(0,0,0,0.3); transition: background-color 0.5s ease-in-out; } .player-art-bg {
    position: relative; padding-top: 40%; background-size: cover; background-position: center center; transition:
    background-image 0.5s ease-in-out; } .player-art-bg::after { content: '' ; position: absolute; top: 0; left: 0;
    right: 0; bottom: 0; background: linear-gradient(to top, var(--player-bg) 0%, rgba(45, 52, 54, 0.7) 50%,
    var(--player-bg) 100%); transition: background 0.5s ease-in-out; } .player-art-fg { position: absolute; top: 50%;
    left: 50%; transform: translate(-50%, -50%); width: 60%; max-width: 250px; /* Increased from 200px */ aspect-ratio:
    1 / 1; border-radius: 0.75rem; box-shadow: 0 10px 25px rgba(0,0,0,0.4); object-fit: cover; z-index: 2; }
    .player-info { padding: 1.5rem; padding-top: 1rem; } .player-info .song-title { font-weight: 700; font-size: 1.2rem;
    } .player-info .artist-name { font-weight: 400; font-size: 1rem; } .player-info .album-name { font-weight: 400;
    font-size: 0.9rem; color: var(--player-text-muted); } .player-controls button { background: transparent; border:
    none; color: var(--player-text); font-size: 1.5rem; opacity: 0.8; transition: all 0.2s ease-in-out; }
    .player-controls button:hover { opacity: 1; transform: scale(1.1); } .player-controls .play-btn { background-color:
    var(--kuaa-primary); border-radius: 50%; width: 60px; height: 60px; font-size: 2rem; } .recent-spin-item img {
    width: 50px; height: 50px; object-fit: cover; } .schedule .nav-link { color: var(--kuaa-accent); font-weight: 700; }
    .schedule .nav-link.active { background-color: var(--kuaa-accent) !important; color: var(--kuaa-secondary)
    !important; } .schedule .table { border-radius: 0.5rem; overflow: hidden; } 8. index.html (Updated) Location: In the
    main kuaa-root-project folder. Changes: Removed Twitter and Facebook icons and updated the Instagram link in the
    footer. <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>KUAA 99.9 FM - Salt Lake City Community Radio</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="style.css">
    </head>

    <body>
        <!-- Hidden Audio Player -->
        <audio id="audio-player" preload="auto">
            <source src="https://stream.xmission.com/kuaa" type="audio/mpeg">
        </audio>

        <header>
            <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
                <div class="container">
                    <a class="navbar-brand" href="index.html">KUAA 99.9FM</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarNav"><span class="navbar-toggler-icon"></span></button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav ms-auto align-items-center">
                            <li class="nav-item"><a class="nav-link active" href="index.html">Home</a></li>
                            <li class="nav-item"><a class="nav-link" href="listeners.html">Listeners</a></li>
                            <li class="nav-item"><a class="nav-link" href="#schedule">Schedule</a></li>
                            <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
                            <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
                            <li class="nav-item ms-lg-2 mt-2 mt-lg-0">
                                <button id="nav-play-btn" class="btn btn-danger btn-lg">
                                    <i id="nav-play-icon" class="bi bi-play-fill"></i> Listen Live
                                </button>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>
        <main>
            <section id="home" class="hero text-center">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-10">
                            <h1 class="display-4 mb-4">Low Powered FM Community Radio Station in Salt Lake City</h1>
                            <p class="lead mb-5">KUAA 99.9 FM is a low powered FM community radio station broadcasting
                                terrestrially in Salt Lake City at 99.9FM, and streaming around the world at kuaafm.org.
                                We
                                pride ourselves on specializing in musical, cultural, linguistic, and artistic
                                diversity.
                                KUAA is an extension of and brought to you by Utah Arts Alliance.</p>

                            <div id="player-container" class="player-container text-center">
                                <div id="player-art-bg" class="player-art-bg">
                                    <img id="player-art-fg" src="https://placehold.co/200/2d3436/dfe6e9?text=KUAA"
                                        alt="Album Art" class="player-art-fg" crossorigin="anonymous">
                                </div>
                                <div class="player-info">
                                    <p id="player-show" class="album-name mb-1">Loading Show...</p>
                                    <p id="player-song" class="song-title mb-0">Loading Song...</p>
                                    <p id="player-artist" class="artist-name mb-3">Loading Artist...</p>
                                    <div class="player-controls d-flex justify-content-center align-items-center">
                                        <button id="volume-btn" class="mx-3"><i id="volume-icon"
                                                class="bi bi-volume-up-fill"></i></button>
                                        <button id="play-pause-btn" class="play-btn mx-3"><i id="play-pause-icon"
                                                class="bi bi-play-fill"></i></button>
                                        <button class="mx-3"><i class="bi bi-heart"></i></button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </section>

            <section id="recent-spins" class="py-5 bg-light">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-10">
                            <h2 class="section-title text-center">Recently Played</h2>
                            <div id="recent-spins-container" class="list-group">
                                <div class="text-center p-3">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="schedule" class="py-5">
                <div class="container">
                    <h2 class="section-title text-center">Program Schedule</h2>
                    <ul class="nav nav-pills justify-content-center mb-4" id="schedule-tabs" role="tablist">
                        <li class="nav-item" role="presentation"><button class="nav-link" id="sunday-tab"
                                data-bs-toggle="tab" data-bs-target="#sunday" type="button" role="tab">Sun</button></li>
                        <li class="nav-item" role="presentation"><button class="nav-link active" id="monday-tab"
                                data-bs-toggle="tab" data-bs-target="#monday" type="button" role="tab">Mon</button></li>
                        <li class="nav-item" role="presentation"><button class="nav-link" id="tuesday-tab"
                                data-bs-toggle="tab" data-bs-target="#tuesday" type="button" role="tab">Tue</button>
                        </li>
                        <li class="nav-item" role="presentation"><button class="nav-link" id="wednesday-tab"
                                data-bs-toggle="tab" data-bs-target="#wednesday" type="button" role="tab">Wed</button>
                        </li>
                        <li class="nav-item" role="presentation"><button class="nav-link" id="thursday-tab"
                                data-bs-toggle="tab" data-bs-target="#thursday" type="button" role="tab">Thu</button>
                        </li>
                        <li class="nav-item" role="presentation"><button class="nav-link" id="friday-tab"
                                data-bs-toggle="tab" data-bs-target="#friday" type="button" role="tab">Fri</button></li>
                        <li class="nav-item" role="presentation"><button class="nav-link" id="saturday-tab"
                                data-bs-toggle="tab" data-bs-target="#saturday" type="button" role="tab">Sat</button>
                        </li>
                    </ul>
                    <div class="tab-content" id="schedule-content">
                        <div class="tab-pane fade" id="sunday" role="tabpanel">
                            <div class="text-center p-3">
                                <div class="spinner-border text-primary" role="status"><span
                                        class="visually-hidden">Loading...</span></div>
                            </div>
                        </div>
                        <div class="tab-pane fade show active" id="monday" role="tabpanel">
                            <div class="text-center p-3">
                                <div class="spinner-border text-primary" role="status"><span
                                        class="visually-hidden">Loading...</span></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="tuesday" role="tabpanel">
                            <div class="text-center p-3">
                                <div class="spinner-border text-primary" role="status"><span
                                        class="visually-hidden">Loading...</span></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="wednesday" role="tabpanel">
                            <div class="text-center p-3">
                                <div class="spinner-border text-primary" role="status"><span
                                        class="visually-hidden">Loading...</span></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="thursday" role="tabpanel">
                            <div class="text-center p-3">
                                <div class="spinner-border text-primary" role="status"><span
                                        class="visually-hidden">Loading...</span></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="friday" role="tabpanel">
                            <div class="text-center p-3">
                                <div class="spinner-border text-primary" role="status"><span
                                        class="visually-hidden">Loading...</span></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="saturday" role="tabpanel">
                            <div class="text-center p-3">
                                <div class="spinner-border text-primary" role="status"><span
                                        class="visually-hidden">Loading...</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
        <footer class="footer py-4">
            <div class="container text-center">
                <div class="mb-3">
                    <a href="https://www.instagram.com/kuaaradio/" target="_blank" class="fs-4 mx-2"><i
                            class="bi bi-instagram"></i></a>
                </div>
                <p>&copy; 2025 KUAA 99.9 FM. A project of the <a href="https://utaharts.org/" target="_blank">Utah Arts
                        Alliance</a>.</p>
            </div>
        </footer>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const colorThief = new ColorThief();

                // --- PLAYER CONTROLS ---
                const audioPlayer = document.getElementById('audio-player');
                const playPauseBtn = document.getElementById('play-pause-btn');
                const playPauseIcon = document.getElementById('play-pause-icon');
                const navPlayBtn = document.getElementById('nav-play-btn');
                const navPlayIcon = document.getElementById('nav-play-icon');
                const volumeBtn = document.getElementById('volume-btn');
                const volumeIcon = document.getElementById('volume-icon');

                function togglePlay() {
                    if (audioPlayer.paused) {
                        audioPlayer.play().catch(e => console.error("Play initiation failed:", e));
                    } else {
                        audioPlayer.pause();
                    }
                }

                function updatePlayIcons() {
                    const isPlaying = !audioPlayer.paused;
                    playPauseIcon.className = isPlaying ? 'bi bi-pause-fill' : 'bi bi-play-fill';
                    navPlayIcon.className = isPlaying ? 'bi bi-pause-fill' : 'bi bi-play-fill';
                }

                function toggleMute() {
                    audioPlayer.muted = !audioPlayer.muted;
                    volumeIcon.className = audioPlayer.muted ? 'bi bi-volume-mute-fill' : 'bi bi-volume-up-fill';
                }

                playPauseBtn.addEventListener('click', togglePlay);
                navPlayBtn.addEventListener('click', togglePlay);
                volumeBtn.addEventListener('click', toggleMute);
                audioPlayer.addEventListener('play', updatePlayIcons);
                audioPlayer.addEventListener('pause', updatePlayIcons);
                audioPlayer.addEventListener('volumechange', () => {
                    volumeIcon.className = audioPlayer.muted || audioPlayer.volume === 0 ? 'bi bi-volume-mute-fill' : 'bi bi-volume-up-fill';
                });

                // --- NOW PLAYING ---
                const nowPlayingApiUrl = `/.netlify/functions/get-now-playing`;
                const playerContainer = document.getElementById('player-container');
                const playerShow = document.getElementById('player-show');
                const playerSong = document.getElementById('player-song');
                const playerArtist = document.getElementById('player-artist');
                const playerArtBg = document.getElementById('player-art-bg');
                const playerArtFg = document.getElementById('player-art-fg');

                const fetchNowPlaying = async () => {
                    try {
                        const response = await fetch(nowPlayingApiUrl);
                        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                        const data = await response.json();

                        const showName = data.show ? data.show.title : 'Community Programming';
                        const djName = (data.show && data.show.personas && data.show.personas.length > 0)
                            ? data.show.personas.map(p => p.name).join(' & ')
                            : 'KUAA';

                        playerShow.textContent = `${showName} with ${djName}`;
                        playerSong.textContent = data.song || 'Music Variety';
                        playerArtist.textContent = data.artist || 'Various Artists';

                        const imageUrl = data.image || 'https://placehold.co/200/2d3436/dfe6e9?text=KUAA';
                        if (playerArtFg.src !== imageUrl) {
                            playerArtFg.src = imageUrl;
                            playerArtBg.style.backgroundImage = `url(${imageUrl})`;

                            playerArtFg.addEventListener('load', () => {
                                try {
                                    const dominantColor = colorThief.getColor(playerArtFg);
                                    const rgbColor = `rgb(${dominantColor.join(',')})`;
                                    playerContainer.style.setProperty('--player-bg', rgbColor);
                                } catch (e) {
                                    playerContainer.style.setProperty('--player-bg', '#2d3436');
                                }
                            }, { once: true });
                        }
                    } catch (error) {
                        console.error("Error fetching Now Playing data:", error);
                    }
                };

                // --- RECENT SPINS ---
                const recentSpinsApiUrl = `/.netlify/functions/get-recent-spins`;
                const recentSpinsContainer = document.getElementById('recent-spins-container');
                const fetchRecentSpins = async () => {
                    try {
                        const response = await fetch(recentSpinsApiUrl);
                        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                        const data = await response.json();

                        if (data.items && data.items.length > 1) {
                            const recent = data.items.slice(1);
                            let recentHtml = '';
                            recent.forEach(spin => {
                                recentHtml += `
                                <div class="list-group-item list-group-item-action d-flex align-items-center recent-spin-item">
                                    <img src="${spin.image || 'https://placehold.co/50x50/A8DADC/1D3557?text=?'}" class="rounded me-3" alt="Album art">
                                    <div class="flex-grow-1">
                                        <div class="fw-bold">${spin.song || 'Untitled'}</div>
                                        <div>${spin.artist || 'Unknown Artist'}</div>
                                    </div>
                                </div>`;
                            });
                            recentSpinsContainer.innerHTML = recentHtml;
                        } else {
                            recentSpinsContainer.innerHTML = '<p class="text-center p-3">No recent songs to display.</p>';
                        }
                    } catch (error) {
                        console.error("Error fetching recent spins:", error);
                    }
                };

                // --- SCHEDULE ---
                const scheduleApiUrl = `/.netlify/functions/get-schedule`;
                const visitorTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
                const formatTime = (dateStr) => {
                    const date = new Date(dateStr);
                    return new Intl.DateTimeFormat('en-US', {
                        hour: 'numeric',
                        minute: '2-digit',
                        timeZone: visitorTimeZone
                    }).format(date);
                };
                const fetchSchedule = async () => {
                    try {
                        const response = await fetch(scheduleApiUrl);
                        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                        const scheduleData = await response.json();
                        const shows = scheduleData.items;

                        const showsByDay = { 0: [], 1: [], 2: [], 3: [], 4: [], 5: [], 6: [] };
                        shows.forEach(show => {
                            const showDate = new Date(show.start);
                            const dayOfWeek = showDate.getDay();
                            showsByDay[dayOfWeek].push(show);
                        });

                        for (const day in showsByDay) {
                            showsByDay[day].sort((a, b) => new Date(a.start).getTime() - new Date(b.start).getTime());
                        }

                        renderSchedule(showsByDay);

                    } catch (error) {
                        console.error("Error fetching schedule:", error);
                    }
                };
                const renderSchedule = (showsByDay) => {
                    const dayMap = { 0: 'sunday', 1: 'monday', 2: 'tuesday', 3: 'wednesday', 4: 'thursday', 5: 'friday', 6: 'saturday' };
                    for (const dayIndex in dayMap) {
                        const dayName = dayMap[dayIndex];
                        const container = document.getElementById(dayName);
                        const dayShows = showsByDay[dayIndex];

                        if (!container) continue;

                        if (dayShows.length === 0) {
                            container.innerHTML = '<p class="text-center p-3">No shows scheduled for today.</p>';
                        } else {
                            let tableHTML = `<table class="table table-striped table-hover">
                            <thead class="table-dark"><tr><th>Time</th><th>Show</th><th>DJ/Host</th></tr></thead><tbody>`;
                            dayShows.forEach(show => {
                                const djName = (show.personas && show.personas.length > 0)
                                    ? show.personas.map(p => p.name).join(' & ')
                                    : 'KUAA';

                                tableHTML += `<tr>
                                <td>${formatTime(show.start)} - ${formatTime(show.end)}</td>
                                <td>${show.title || 'Untitled Show'}</td>
                                <td>${djName}</td>
                            </tr>`;
                            });
                            tableHTML += `</tbody></table>`;
                            container.innerHTML = tableHTML;
                        }
                    }
                };

                // --- INITIALIZE ---
                fetchNowPlaying();
                fetchRecentSpins();
                fetchSchedule();
                setInterval(fetchNowPlaying, 20000);
                setInterval(fetchRecentSpins, 60000);

                // Set Today's Tab as Active
                const todayIndex = new Date().getDay();
                const dayMap = { 0: 'sunday', 1: 'monday', 2: 'tuesday', 3: 'wednesday', 4: 'thursday', 5: 'friday', 6: 'saturday' };
                const todayTab = document.getElementById(`${dayMap[todayIndex]}-tab`);
                if (todayTab) {
                    const tab = new bootstrap.Tab(todayTab);
                    tab.show();
                }

                // --- SMOOTH SCROLL ---
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        if (this.getAttribute('data-bs-toggle') === 'tab' || this.id === 'nav-play-btn') return;
                        e.preventDefault();
                        document.querySelector(this.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
                    });
                });
            });
        </script>
    </body>

    </html>